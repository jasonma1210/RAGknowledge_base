# RAG知识库系统前端开发文档 v1.0

## 📋 概述

RAG知识库系统前端项目是一个基于React的单页应用（SPA），实现了与后端API v1.1版本的完整对接。项目采用现代化的前端技术栈，提供了用户认证、文档管理、知识搜索、向量数据管理、系统监控等核心功能。

## 🏗️ 项目架构

### 技术栈
- **框架**: React 18+
- **路由**: React Router v6+
- **UI库**: Ant Design
- **构建工具**: Create React App
- **HTTP客户端**: Fetch API
- **状态管理**: React Context API

### 项目结构
```
src/
├── components/          # React组件
├── services/            # API服务层
├── contexts/            # 全局状态管理
├── styles/              # 样式文件
├── App.js              # 主应用组件
├── index.js            # 应用入口
└── setupProxy.js       # 开发代理配置
```

## 📊 模块结构

### 1. 认证模块
#### 1.1 登录注册功能
- **组件**: LoginPage.js
- **功能**: 
  - 用户登录/注册
  - JWT Token管理
  - 用户信息缓存
- **API接口**: 
  - `POST /auth/login`
  - `POST /auth/register`

#### 1.2 用户信息管理
- **组件**: ProfilePage.js
- **功能**: 
  - 查看用户基本信息
  - 修改用户密码
  - 存储使用情况展示
- **API接口**: 
  - `GET /auth/profile`
  - `PUT /auth/change-password`

#### 1.3 认证状态管理
- **组件**: UserContext.js
- **功能**: 
  - 全局用户状态管理
  - Token自动刷新
  - 用户信息本地缓存

### 2. 文档管理模块
#### 2.1 文档列表
- **组件**: UserDocumentsPage.js
- **功能**: 
  - 文档分页展示
  - 文档详情查看
  - 文档下载和删除
- **API接口**: 
  - `GET /documents`
  - `GET /documents/{id}/download`
  - `DELETE /documents/{id}`

#### 2.2 文件上传
- **组件**: FileUploadPage.js
- **功能**: 
  - 文件选择和上传
  - 异步上传处理
  - 上传进度显示
- **API接口**: 
  - `POST /documents/upload/async`

### 3. 知识搜索模块
#### 3.1 知识库搜索
- **组件**: KnowledgeQAPage.js
- **功能**: 
  - 知识库内容搜索
  - AI问答功能
  - 搜索结果展示
- **API接口**: 
  - `POST /search`
  - `POST /search/ask`

### 4. 向量数据模块
#### 4.1 向量数据管理
- **组件**: VectorDataPage.js
- **功能**: 
  - 向量数据分页展示
  - 向量统计信息
  - 向量数据删除
- **API接口**: 
  - `GET /vector-data`
  - `GET /vector-data/stats`
  - `DELETE /vector-data/{id}`

### 5. 系统监控模块
#### 5.1 系统状态监控
- **组件**: SystemMonitorCard.js, SystemMonitorPage.js
- **功能**: 
  - 系统资源使用情况
  - 用户存储使用情况
  - 实时数据刷新
- **API接口**: 
  - `GET /system/dashboard`

#### 5.2 健康检查
- **组件**: HealthCheckPage.js
- **功能**: 
  - 系统健康状态检查
  - 组件状态详情
  - 环境信息展示
- **API接口**: 
  - `GET /actuator/health`
  - `GET /actuator/info`
  - `GET /actuator/env`

### 6. 布局和路由模块
#### 6.1 主布局
- **组件**: Layout.js
- **功能**: 
  - 侧边栏导航
  - 顶部用户信息
  - 页面路由管理

#### 6.2 路由配置
- **组件**: App.js
- **功能**: 
  - 路由定义和保护
  - 页面组件映射
  - 认证路由守卫

## 🛠️ 核心服务层

### API服务 (services/api.js)
统一的API服务层，提供以下核心功能：

#### 1. 基础API客户端 (ApiClient)
- JWT Token自动管理
- 链路追踪ID生成
- 统一错误处理
- 请求/响应拦截

#### 2. 认证API (AuthAPI)
- 用户登录/注册
- Token刷新
- 用户信息获取
- 密码修改

#### 3. 文档API (DocumentAPI)
- 文档列表获取
- 文档上传/下载
- 文档删除

#### 4. 搜索API (SearchAPI)
- 知识库搜索
- AI问答

#### 5. 向量数据API (VectorDataAPI)
- 向量数据获取
- 向量统计信息
- 向量数据删除

#### 6. 系统API (SystemAPI)
- 系统仪表板数据
- 系统状态信息

#### 7. 健康检查API (HealthAPI)
- 健康状态检查
- 系统信息获取
- 监控指标查询

## 🎨 UI设计

### 主题样式 (styles/theme.css)
采用Ruoyi风格的主题设计：
- 主色调：蓝色 (#409EFF)
- 响应式布局
- 卡片式组件设计
- 统一的按钮和表单样式

### 组件设计原则
- 组件化开发
- 状态管理分离
- 错误边界处理
- 加载状态提示
- 用户友好的交互

## 🔧 开发配置

### 环境配置
- **开发服务器**: http://localhost:3000
- **API代理**: /api → http://localhost:8080
- **Node版本**: 14+
- **NPM版本**: 6+

### 依赖包
主要依赖包包括：
- react: ^18.2.0
- react-dom: ^18.2.0
- react-router-dom: ^6.8.0
- antd: ^4.24.0
- http-proxy-middleware: ^2.0.6

### 脚本命令
```bash
# 启动开发服务器
npm start

# 构建生产版本
npm run build

# 运行测试
npm test

# 代码检查
npm run eject
```

## 🚀 部署说明

### 构建部署
1. 运行 `npm run build` 生成生产版本
2. 将 `build/` 目录部署到Web服务器
3. 配置反向代理指向后端API服务

### 环境变量
- `REACT_APP_API_BASE_URL`: API基础URL（可选）

## 🔒 安全特性

### 认证安全
- JWT Token认证
- Token过期自动刷新
- 401未授权自动处理

### 数据安全
- HTTPS支持
- XSS防护
- 敏感信息脱敏

### 网络安全
- CORS配置
- 请求头安全设置
- 链路追踪支持

## 📈 性能优化

### 前端优化
- 组件懒加载
- 请求缓存
- 防抖搜索
- 分页加载

### 用户体验
- 加载状态提示
- 错误信息友好展示
- 响应式设计
- 键盘快捷键支持

## 🎯 API接口完整映射

### 认证接口
| 功能 | 前端方法 | 后端接口 |
|------|---------|---------|
| 用户注册 | authAPI.register() | POST /auth/register |
| 用户登录 | authAPI.login() | POST /auth/login |
| 获取用户信息 | authAPI.getProfile() | GET /auth/profile |
| 刷新Token | authAPI.refreshToken() | POST /auth/refresh |
| 用户登出 | authAPI.logout() | POST /auth/logout |
| 修改密码 | authAPI.changePassword() | PUT /auth/change-password |

### 文档管理接口
| 功能 | 前端方法 | 后端接口 |
|------|---------|---------|
| 上传文档 | documentAPI.uploadDocument() | POST /documents/upload |
| 异步上传文档 | documentAPI.uploadDocumentAsync() | POST /documents/upload/async |
| 获取文档列表 | documentAPI.getDocuments() | GET /documents |
| 获取文档详情 | documentAPI.getDocument() | GET /documents/{id} |
| 下载文档 | documentAPI.downloadDocument() | GET /documents/{id}/download |
| 删除文档 | documentAPI.deleteDocument() | DELETE /documents/{id} |

### 搜索接口
| 功能 | 前端方法 | 后端接口 |
|------|---------|---------|
| 知识库搜索 | searchAPI.search() | POST /search |
| 简单搜索 | searchAPI.simpleSearch() | GET /search/simple |
| AI问答 | searchAPI.ask() | POST /search/ask |

### 向量数据接口
| 功能 | 前端方法 | 后端接口 |
|------|---------|---------|
| 获取向量数据 | vectorDataAPI.getVectorData() | GET /vector-data |
| 获取向量统计 | vectorDataAPI.getVectorStats() | GET /vector-data/stats |
| 删除向量数据 | vectorDataAPI.deleteVectorData() | DELETE /vector-data/{id} |

### 系统监控接口
| 功能 | 前端方法 | 后端接口 |
|------|---------|---------|
| 系统仪表板 | systemAPI.getDashboard() | GET /system/dashboard |
| 系统状态 | systemAPI.getSystemStatus() | GET /system/status |

### 健康检查接口
| 功能 | 前端方法 | 后端接口 |
|------|---------|---------|
| 健康检查 | healthAPI.getHealth() | GET /actuator/health |
| 系统信息 | healthAPI.getInfo() | GET /actuator/info |
| 监控指标 | healthAPI.getMetrics() | GET /actuator/metrics |
| Prometheus指标 | healthAPI.getPrometheusMetrics() | GET /actuator/prometheus |
| 环境信息 | healthAPI.getEnvironment() | GET /actuator/env |
| 配置属性 | healthAPI.getConfigProperties() | GET /actuator/configprops |

## 📝 开发规范

### 代码规范
- 遵循ESLint规范
- 使用函数式组件
- 合理使用Hooks
- 组件命名规范

### API调用规范
- 统一使用services/api.js
- 标准化错误处理
- 响应格式统一处理
- 请求参数验证

### 样式规范
- 使用CSS变量
- 组件样式隔离
- 响应式设计
- 主题一致性

## 🎉 项目特点

### 技术优势
1. **现代化技术栈**: 基于React 18+的最新特性
2. **模块化设计**: 清晰的模块划分和组件结构
3. **统一API管理**: 集中的API服务层设计
4. **安全可靠**: 完善的认证和安全机制
5. **用户体验**: 优秀的交互设计和响应速度

### 功能完整性
1. **认证体系**: 完整的用户注册、登录、登出流程
2. **文档管理**: 支持文档上传、下载、删除等操作
3. **知识搜索**: 提供智能搜索和AI问答功能
4. **数据管理**: 向量数据的可视化管理
5. **系统监控**: 实时的系统状态监控和健康检查

### 可维护性
1. **代码结构清晰**: 易于理解和维护的项目结构
2. **文档完善**: 详细的开发文档和API说明
3. **扩展性强**: 模块化设计便于功能扩展
4. **测试友好**: 良好的测试支持和错误处理

## 📌 版本信息

- **文档版本**: v1.0
- **项目版本**: v1.1
- **更新时间**: 2025-09-19
- **兼容API版本**: v1.1

---
*本文档详细描述了RAG知识库系统前端项目的架构设计、模块结构、核心功能和开发规范，为项目的维护和扩展提供了完整的参考。*
```

```
# 前端开发文档 v1.0

## 项目概述

本项目是基于Vue3 + Element Plus的现代化知识库管理系统前端，旨在为用户提供完整的知识管理解决方案。系统包含文档管理、知识搜索、AI问答、向量数据管理、系统监控等功能模块。

## 技术架构

### 前端技术栈
- **Vue 3** - 渐进式JavaScript框架，采用Composition API
- **TypeScript** - JavaScript的超集，提供类型安全
- **Element Plus** - Vue 3的桌面端组件库
- **Vue Router** - Vue.js的官方路由管理器
- **Axios** - 基于Promise的HTTP客户端
- **Vite** - 新一代前端构建工具

### 项目结构
```
src/
├── assets/           # 静态资源文件
├── components/       # 公共组件
├── layouts/          # 布局组件
├── router/           # 路由配置
├── services/         # API服务层
├── stores/           # 状态管理
├── views/            # 页面视图
├── App.vue           # 根组件
└── main.ts           # 入口文件
```

## 功能模块

### 1. 认证模块
- 用户登录/注册
- JWT Token管理
- 用户信息获取
- 修改密码
- Token刷新

### 2. 文档管理模块
- 文档上传/下载
- 文档列表查看（支持分页和搜索）
- 文档详情查看
- 文档删除

### 3. 知识搜索模块
- 语义搜索
- 关键词搜索
- 混合搜索
- 搜索结果展示

### 4. AI问答模块
- 智能问答系统
- 答案置信度显示
- 参考来源展示
- 问答历史记录

### 5. 向量数据管理模块
- 向量数据统计
- 向量数据列表查看
- 向量维度信息展示

### 6. 系统监控模块
- 系统健康状态检查
- 系统指标监控
- 系统信息查看
- 资源使用情况展示

## API接口设计

所有API接口通过统一的服务层进行管理，位于`/src/services/api.ts`文件中。

### 接口模块
1. `authAPI` - 认证相关接口
2. `documentAPI` - 文档管理接口
3. `searchAPI` - 搜索相关接口
4. `vectorDataAPI` - 向量数据接口
5. `systemAPI` - 系统监控接口
6. `healthAPI` - 健康检查接口

### 拦截器机制
- **请求拦截器**：自动添加JWT Token和链路追踪ID
- **响应拦截器**：自动处理401错误并跳转登录页

### 统一响应格式
``typescript
interface ApiResponse<T = any> {
  success: boolean
  data?: T
  message?: string
  traceId?: string
  error?: string
  code?: number
  status?: number
  timestamp?: string
  path?: string
}
```

## 路由配置

路由配置位于`/src/router/index.ts`，采用嵌套路由设计：

- `/login` - 登录页面
- `/` - 默认布局，包含以下子路由：
  - `/dashboard` - 仪表板
  - `/documents` - 文档管理
  - `/search` - 知识搜索
  - `/ask` - AI问答
  - `/vector-data` - 向量数据
  - `/system-monitor` - 系统监控

## 跨域解决方案

通过Vite代理配置解决跨域问题：

```
server: {
  proxy: {
    '/api': {
      target: 'http://localhost:8080',
      changeOrigin: true,
      rewrite: (path) => path.replace(/^\/api/, '')
    },
    '/actuator': {
      target: 'http://localhost:8080',
      changeOrigin: true
    }
  }
}
```

## 安全机制

1. **JWT认证**：用户登录后自动保存Token到localStorage
2. **自动登出**：401错误时自动清除Token并跳转登录页
3. **链路追踪**：每次请求自动生成唯一TraceId
4. **权限控制**：路由守卫控制页面访问权限

## 开发规范

### 代码规范
1. 使用TypeScript进行类型检查
2. 遵循Vue 3 Composition API规范
3. 组件命名使用PascalCase
4. 文件命名使用kebab-case
5. API调用统一使用services层

### 样式规范
1. 使用Element Plus组件库
2. 遵循Element Plus设计规范
3. 响应式布局设计
4. 统一的色彩和间距规范

## 部署说明

### 环境要求
- Node.js >= 16.0.0
- npm >= 7.0.0

### 安装依赖
```
npm install
```

### 启动开发服务器
```
npm run dev
```

### 构建生产版本
```
npm run build
```

### 类型检查
```
npm run type-check
```

## 项目特点

1. **现代化技术栈**：采用Vue3 + TypeScript + Vite技术组合
2. **模块化设计**：功能模块清晰分离，便于维护和扩展
3. **统一API管理**：所有接口调用通过服务层统一管理
4. **完善的错误处理**：统一的错误处理机制
5. **安全机制**：JWT认证和权限控制
6. **响应式设计**：适配不同屏幕尺寸
7. **良好的用户体验**：Element Plus组件库提供优秀的交互体验

## 后续优化建议

1. **状态管理**：引入Pinia进行全局状态管理
2. **国际化**：支持多语言切换
3. **主题定制**：支持暗色主题切换
4. **性能优化**：代码分割和懒加载优化
5. **测试覆盖**：增加单元测试和集成测试
6. **文档完善**：补充详细的API文档和使用说明

## 总结

本前端项目基于现代化的Vue3技术栈，实现了完整的知识库管理系统功能。通过统一的API服务层、完善的路由配置、安全的认证机制和优秀的用户体验，为用户提供了高效的知识管理解决方案。项目结构清晰，代码规范，便于后续维护和扩展。
